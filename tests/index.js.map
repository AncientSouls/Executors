{"version":3,"sources":["../src/tests/index.js"],"names":["require","install","cache","get","query","Item","Promise","reject","mount","describe","it","then","equal","i","getResult","childs","a","b","unmount","isFalse","isMounted","document","d","deepEqual","getResults"],"mappings":"+uBAEA,0BACA,4B,2CACA,gC,yCACA,8B,6CACA,8B,6CACA,+B,6CAEA,sC,mDAEA,qD,63BAXAA,QAAQ,oBAAR,EAA8BC,OAA9B,GAgBA,GAAIC,OAAQ,EAAZ,CACA,QAASC,KAAT,CAAaC,KAAb,CAAoB,CAClB,GAAI,CAACF,MAAME,KAAN,CAAL,CAAmB,CACjB,GAAIA,OAAS,gBAAb,CAA+BF,MAAME,KAAN,EAAe,GAAIC,KAAJ,oBAAf,CAA/B,IACK,IAAI,CAAC,oBAAUD,KAAV,CAAL,CAAuB,MAAOE,SAAQC,MAAR,kBAAgCH,KAAhC,iBAAP,CAAvB,IACAF,OAAME,KAAN,EAAe,GAAIC,KAAJ,CAAS,oBAAUD,KAAV,CAAT,CACrB,CAED,MAAOF,OAAME,KAAN,EAAaI,KAAb,EACR,E,GAEKH,K,yPACAD,K,CAAO,CACT,MAAOD,MAAIC,KAAJ,CACR,C,uCAGHK,SAAS,wBAAT,CAAmC,UAAM,CACvCC,GAAG,IAAH,CAAS,iBACPP,MAAI,GAAJ,EACCQ,IADD,CACM,WAAK,CACT;AACA,aAAOC,KAAP,CAAaC,EAAEC,SAAF,EAAb,CAA4B,CAA5B,EACA,aAAOF,KAAP,CAAaC,EAAEE,MAAF,CAASC,CAAT,CAAWF,SAAX,EAAb,CAAqC,CAArC,EACA,aAAOF,KAAP,CAAaC,EAAEE,MAAF,CAASE,CAAT,CAAWH,SAAX,EAAb,CAAqC,CAArC,EAEA,MAAOD,EACR,CARD,EASCF,IATD,CASM,kBAAKE,GAAEK,OAAF,EAAL,CATN,EAUCP,IAVD,CAUM,WAAK,CACT;AACA,aAAOQ,OAAP,CAAeN,EAAEO,SAAF,EAAf,EACA,aAAOD,OAAP,CAAeN,EAAEE,MAAF,CAASC,CAAT,CAAWI,SAAX,EAAf,EACA,aAAOD,OAAP,CAAeN,EAAEE,MAAF,CAASE,CAAT,CAAWG,SAAX,EAAf,EAEA,MAAOP,EACR,CAjBD,CADO,CAAT,EAoBAH,GAAG,KAAH,CAAU,iBACRP,MAAI,GAAJ,EACCQ,IADD,CACM,SAACE,CAAD,CAAO,CACX;AACA,aAAOD,KAAP,CAAaC,EAAEC,SAAF,EAAb,CAA4B,gBAA5B,EACA,aAAOF,KAAP,SAAoBC,EAAEE,MAAF,CAASM,QAAT,CAAkBP,SAAlB,EAApB,EAAoD,QAApD,EACA,aAAOF,KAAP,CAAaC,EAAEE,MAAF,CAASO,CAAT,CAAWR,SAAX,EAAb,CAAqC,sBAArC,EACA;AACA,aAAOS,SAAP,CACErB,MAAMmB,QAAN,CAAeP,SAAf,GAA2BU,UAA3B,EADF,CAEE,CAAE,sBAAF,CAA0B,gBAA1B,CAFF,EAKA,MAAOX,EACR,CAbD,EAcCF,IAdD,CAcM,kBAAKE,GAAEK,OAAF,EAAL,CAdN,EAeCP,IAfD,CAeM,WAAK,CACT;AACA,aAAOQ,OAAP,CAAeN,EAAEO,SAAF,EAAf,EACA,aAAOD,OAAP,CAAeN,EAAEE,MAAF,CAASM,QAAT,CAAkBD,SAAlB,EAAf,EACA,aAAOD,OAAP,CAAeN,EAAEE,MAAF,CAASO,CAAT,CAAWF,SAAX,EAAf,EAEA,MAAOP,EACR,CAtBD,CADQ,CAAV,CAyBD,CA9CD","file":"index.js","sourcesContent":["require('source-map-support').install();\n\nimport { assert } from 'chai';\nimport async from 'async';\nimport each from 'async/each';\nimport lodash from 'lodash';\nimport colors from 'colors';\nimport PromiseProps from 'p-props';\n\nimport documents from './documents';\n\nimport {\n  Item as ProtoItem,\n  js,\n} from '../lib/implementation';\n\nvar cache = {};\nfunction get(query) {\n  if (!cache[query]) {\n    if (query == 'executors://js') cache[query] = new Item(js);\n    else if (!documents[query]) return Promise.reject(`Data by query ${query} not founded.`);\n    else cache[query] = new Item(documents[query]);\n  }\n  \n  return cache[query].mount();\n};\n\nclass Item extends ProtoItem {\n  get(query) {\n    return get(query);\n  }\n}\n\ndescribe('AncientSouls/Funicular', () => {\n  it('js', () => (\n    get('c')\n    .then(i => {\n      // Is items mounted?\n      assert.equal(i.getResult(), 3);\n      assert.equal(i.childs.a.getResult(), 1);\n      assert.equal(i.childs.b.getResult(), 2);\n      \n      return i;\n    })\n    .then(i => i.unmount())\n    .then(i => {\n      // Is items unmounted?\n      assert.isFalse(i.isMounted());\n      assert.isFalse(i.childs.a.isMounted());\n      assert.isFalse(i.childs.b.isMounted());\n      \n      return i;\n    })\n  ));\n  it('css', () => (\n    get('e')\n    .then((i) => {\n      // Is items mounted?\n      assert.equal(i.getResult(), '<div>123</div>');\n      assert.equal(typeof(i.childs.document.getResult()), 'object');\n      assert.equal(i.childs.d.getResult(), 'body { color: red; }');\n      // Document has been generated?\n      assert.deepEqual(\n        cache.document.getResult().getResults(),\n        [ 'body { color: red; }', '<div>123</div>' ]\n      );\n      \n      return i;\n    })\n    .then(i => i.unmount())\n    .then(i => {\n      // Is items unmounted?\n      assert.isFalse(i.isMounted());\n      assert.isFalse(i.childs.document.isMounted());\n      assert.isFalse(i.childs.d.isMounted());\n      \n      return i;\n    })\n  ));\n});"]}