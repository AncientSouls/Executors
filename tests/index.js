'use strict';var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if('value'in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _chai=require('chai');var _lib=require('../lib');var _lib2=_interopRequireDefault(_lib);var _ancientGraph=require('ancient-graph');var _async=require('async');var _async2=_interopRequireDefault(_async);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError('Cannot call a class as a function')}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError('this hasn\'t been initialised - super() hasn\'t been called')}return call&&(typeof call==='object'||typeof call==='function')?call:self}function _inherits(subClass,superClass){if(typeof superClass!=='function'&&superClass!==null){throw new TypeError('Super expression must either be null or a function, not '+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}require('source-map-support').install();function generateGraph(){var collection=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[];return new _ancientGraph.ObjectGraph(collection,{id:'id',childs:'childs'})};function generateFunicular(){var graph=arguments.length>0&&arguments[0]!==undefined?arguments[0]:generateGraph();var funicular=new _lib2.default;var OldCarriage=funicular.Carriage;funicular.Carriage=function(_OldCarriage){_inherits(_class,_OldCarriage);function _class(){_classCallCheck(this,_class);return _possibleConstructorReturn(this,(_class.__proto__||Object.getPrototypeOf(_class)).apply(this,arguments))}_createClass(_class,[{key:'subscribe',value:function subscribe(callback){var _this2=this;this.unsubscribe=function(){};graph.on('update',function(oldData,newData){if(newData.id==_this2.name)_this2.updated(newData)});graph.on('remove',function(oldData,newData){if(newData.id==_this2.name)_this2.removed()});graph.get(this.name,undefined,function(error,data){_this2.fetched(error,data);callback(error)})}}]);return _class}(OldCarriage);return funicular};describe('AncientSouls/Funicular',function(){it('new Funicular',function(){generateFunicular()});it('new funicular.Carriage',function(){var funicular=generateFunicular();var carriage=new funicular.Carriage('a');_chai.assert.deepProperty(funicular,'carriages.a.'+carriage.id)});it('funicular.mount',function(done){var graph=generateGraph();graph.insert({id:'a'});var funicular=generateFunicular(graph);funicular.mount('a',function(error,carriage){_chai.assert.ifError(error);_chai.assert.instanceOf(carriage,_lib.Carriage);_chai.assert.deepProperty(carriage,'data.id');_chai.assert.equal(carriage.data.id,'a');_chai.assert.equal(carriage.stage,'mounted');done()})});it('carriage.unmount',function(done){var graph=generateGraph();graph.insert({id:'a'});var funicular=generateFunicular(graph);funicular.mount('a',function(error,carriage){carriage.unmount(function(){_chai.assert.notDeepProperty(funicular,'carriages.a.'+carriage.id);_chai.assert.equal(carriage.stage,'unmounted');done()})})})});
//# sourceMappingURL=index.js.map