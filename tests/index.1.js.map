{"version":3,"sources":["../src/tests/index.1.js"],"names":["require","install","describe","it","done","js","node","module","Module","name","requires","loaded","exports","query","undefined","eval","document","data","Promise","resolve","reject","all","map","r","execute","then","memory","a","id","childs","b","c","fill","isNode","Error"],"mappings":"aAEA,0BACA,4B,2CACA,gC,yCACA,8B,6CACA,8B,6CACA,+B,6CAEA,2B,kFATAA,QAAQ,oBAAR,EAA8BC,OAA9B,GAcAC,SAAS,wBAAT,CAAmC,UAAM,CACvCC,GAAG,mDAAH,CAAwD,SAACC,IAAD,CAAU,CAEpE,GAAIC,IAAK,QAALA,GAAK,CAACC,IAAD,CAAU,CACjBA,KAAKC,MAAL,CAAc,GAAIC,OAAJ,CAAWF,KAAKG,IAAhB,CAAd,CACAH,KAAKI,QAAL,CAAgB,EAAhB,CACAJ,KAAKN,OAAL,CAAe,UAAM,CACnB,GAAI,CAACM,KAAKC,MAAL,CAAYI,MAAjB,CAAyB,CACvB,GAAIJ,QAASD,KAAKC,MAAlB,CACA,GAAIK,SAAUL,OAAOK,OAArB,CACA,GAAIZ,SAAU,QAAVA,QAAU,CAACa,KAAD,QAAWP,MAAKI,QAAL,CAAcG,KAAd,EAAqBb,OAArB,CAA6BM,KAAKI,QAAL,CAAcG,KAAd,EAAqBb,OAArB,EAA7B,CAA4Dc,SAAvE,CAAd,CACAC,KAAKT,KAAKU,QAAL,CAAcC,IAAnB,EACAX,KAAKC,MAAL,CAAYI,MAAZ,CAAqB,IACtB,CACD,MAAOL,MAAKC,MAAL,CAAYK,OACpB,CATD,CAUA,GAAIN,KAAKU,QAAL,CAAcN,QAAlB,CAA4B,CAC1B,MAAO,IAAIQ,QAAJ,CAAY,SAACC,OAAD,CAAUC,MAAV,CAAqB,CACtCF,QAAQG,GAAR,CAAYf,KAAKU,QAAL,CAAcN,QAAd,CAAuBY,GAAvB,CAA2B,SAACC,CAAD,QAAOC,SAAQD,CAAR,CAAP,CAA3B,CAAZ,EAA2DE,IAA3D,CAAgE,SAACf,QAAD,CAAc,CAC5E,IAAK,GAAIa,EAAT,GAAcjB,MAAKU,QAAL,CAAcN,QAA5B,CAAsC,CACpCJ,KAAKI,QAAL,CAAcJ,KAAKU,QAAL,CAAcN,QAAd,CAAuBa,CAAvB,CAAd,EAA2Cb,SAASa,CAAT,CAC5C,CACDJ,QAAQb,IAAR,CACD,CALD,CAMD,CAPM,CAQR,CATD,IASO,OAAOA,KACf,CAvBD,CAyBA,GAAIoB,QAAS,CACXC,EAAG,CACDC,GAAI,GADH,CAEDC,OAAQ,CAAC,GAAD,CAAK,GAAL,CAFP,CAGDZ,sFAHC,CADQ,CAUXa,EAAG,CACDF,GAAI,GADH,CAEDX,0BAFC,CAVQ,CAcXc,EAAG,CACDH,GAAI,GADH,CAEDX,0BAFC,CAdQ,CAAb,CAoBA,GAAMe,MAAO,QAAPA,KAAO,CAACnB,KAAD,QAAW,UAACP,IAAD,CAAU,CAChC,GAAI,CAAC2B,OAAO3B,IAAP,CAAL,CAAmB,KAAM,IAAI4B,MAAJ,CAAa5B,IAAb,2BAAN,CAEnB,GAAI,CAACoB,OAAOb,KAAP,CAAL,CAAoB,KAAM,IAAIqB,MAAJ,kBAA2BrB,KAA3B,iBAAN,CACpBP,KAAKW,IAAL,CAAYS,OAAOb,KAAP,CAAZ,CACAP,KAAKsB,EAAL,CAAUtB,KAAKW,IAAL,CAAUW,EAGrB,CARY,CAUV,CAzDD,CA0DD,CA3DD","file":"index.1.js","sourcesContent":["require('source-map-support').install();\n\nimport { assert } from 'chai';\nimport async from 'async';\nimport each from 'async/each';\nimport lodash from 'lodash';\nimport colors from 'colors';\nimport PromiseProps from 'p-props';\n\nimport {\n  Carriage,\n  isCarriage,\n} from '../lib';\n\ndescribe('AncientSouls/Funicular', () => {\n  it('hierarchical enable disable js from custom memory', (done) => {\n\nvar js = (node) => {\n  node.module = new Module(node.name);\n  node.requires = {};\n  node.require = () => {\n    if (!node.module.loaded) {\n      var module = node.module;\n      var exports = module.exports;\n      var require = (query) => node.requires[query].require?node.requires[query].require():undefined;\n      eval(node.document.data);\n      node.module.loaded = true;\n    }\n    return node.module.exports;\n  };\n  if (node.document.requires) {\n    return new Promise((resolve, reject) => {\n      Promise.all(node.document.requires.map((r) => execute(r))).then((requires) => {\n        for (var r in node.document.requires) {\n          node.requires[node.document.requires[r]] = requires[r];\n        }\n        resolve(node);\n      });\n    });\n  } else return node;\n};\n\nvar memory = {\n  a: {\n    id: 'z',\n    childs: ['b','c'],\n    data: `\nvar a = require('a');\nvar b = require('b');\nmodule.exports = a+b;\n    `,\n  },\n  b: {\n    id: 'y',\n    data: `module.exports = 1;`,\n  },\n  c: {\n    id: 'x',\n    data: `module.exports = 2;`,\n  },\n};\n\nconst fill = (query) => (node) => {\n  if (!isNode(node)) throw new Error(`${node} is not instanceof Node`);\n  \n  if (!memory[query]) throw new Error(`Data by query ${query} not founded.`);\n  node.data = memory[query];\n  node.id = node.data.id;\n  \n  \n}\n\n  });\n});"]}